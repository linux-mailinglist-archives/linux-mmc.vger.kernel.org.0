Return-Path: <linux-mmc+bounces-7089-lists+linux-mmc=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-mmc@lfdr.de
Delivered-To: lists+linux-mmc@lfdr.de
Received: from sv.mirrors.kernel.org (sv.mirrors.kernel.org [139.178.88.99])
	by mail.lfdr.de (Postfix) with ESMTPS id 13E84ADE101
	for <lists+linux-mmc@lfdr.de>; Wed, 18 Jun 2025 04:14:25 +0200 (CEST)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by sv.mirrors.kernel.org (Postfix) with ESMTPS id 9E9733A634A
	for <lists+linux-mmc@lfdr.de>; Wed, 18 Jun 2025 02:13:59 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 5ECC618FDA5;
	Wed, 18 Jun 2025 02:14:18 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (2048-bit key) header.d=codeconstruct.com.au header.i=@codeconstruct.com.au header.b="aEfMq3/d"
X-Original-To: linux-mmc@vger.kernel.org
Received: from codeconstruct.com.au (pi.codeconstruct.com.au [203.29.241.158])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id 6A39B4A1D;
	Wed, 18 Jun 2025 02:14:12 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=203.29.241.158
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1750212858; cv=none; b=K8NY5ox0CyIfW7jVeVxuXvtI14ta/z1ZCYYAo0TtnmBBWkiz8aTReCZRSBy9uwL3cS1qUBsEA7gOzN12nuKHEnHYtiFb5cDWhQug07qfZBS5ulSRSLgrWSsK5IOaua2PRjhJxBt7jE+HZT1I1BXYC+4+wDMwAlm2rPR3aNCcieY=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1750212858; c=relaxed/simple;
	bh=A7Q/S+Nx1wYLfgyCrhVZ0O/ymo4GU3rPfbiJPyENwJc=;
	h=Message-ID:Subject:From:To:Date:In-Reply-To:References:
	 Content-Type:MIME-Version; b=uPLqD5fbXKFlbOtowUCbjTXIXkx7RQ+TkUuNcxWml2yLl+aPAWKvAbOHiX2AFCRb7FzzOJ3zmUEYENwg46+yBbiX3qz40v4W2REYUT9LRT84kZPTtxukqMoBG0Kx0BWSGVPOBosb/b3a7lD/NASChb+RGSqCKfrDv2YiZM8ZVCY=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dmarc=pass (p=none dis=none) header.from=codeconstruct.com.au; spf=pass smtp.mailfrom=codeconstruct.com.au; dkim=pass (2048-bit key) header.d=codeconstruct.com.au header.i=@codeconstruct.com.au header.b=aEfMq3/d; arc=none smtp.client-ip=203.29.241.158
Authentication-Results: smtp.subspace.kernel.org; dmarc=pass (p=none dis=none) header.from=codeconstruct.com.au
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=codeconstruct.com.au
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=codeconstruct.com.au; s=2022a; t=1750212843;
	bh=A7Q/S+Nx1wYLfgyCrhVZ0O/ymo4GU3rPfbiJPyENwJc=;
	h=Subject:From:To:Date:In-Reply-To:References;
	b=aEfMq3/d5xXncv7VxHYw9N0VLETx4q+lDyOtHB1lysvwZ73V7Ewb3boNFxW5F4iY6
	 XdAafWnssaYKsjvwByysgAvBkU6YegbIC04PNbQ8dWMCNOK+IM7h90YBQwPatnmKVH
	 ReDEBOFFfE9lZgmOg3DvgdUYQb+023RF/bkYIDAAhuhuFkP0o0+rXowae5iNVia/DK
	 wnWEMlxJ2Cx9EyFAUnLAN66PrISzNBp3bPfUhbbR7/Qz24wHrzS1fGpw4OB0IQEX5L
	 g9DOrniK2/Sn1QJ8lG1OPDciD1NCMO5cF2eAGOb15UH1S32Y/2vdPvOymaUemmEups
	 vuDk8gWcHJ+lw==
Received: from [192.168.68.112] (unknown [180.150.112.166])
	by mail.codeconstruct.com.au (Postfix) with ESMTPSA id 2962B640A0;
	Wed, 18 Jun 2025 10:14:01 +0800 (AWST)
Message-ID: <80f56269175d8658ba1ab4a1fe9a43d18294ca60.camel@codeconstruct.com.au>
Subject: Re: [PATCH 1/8] mmc: sdhci-of-aspeed: Fix sdhci software reset
 can't be cleared issue.
From: Andrew Jeffery <andrew@codeconstruct.com.au>
To: Cool Lee <cool_lee@aspeedtech.com>, adrian.hunter@intel.com, 
	ulf.hansson@linaro.org, joel@jms.id.au, p.zabel@pengutronix.de, 
	linux-aspeed@lists.ozlabs.org, openbmc@lists.ozlabs.org, 
	linux-mmc@vger.kernel.org, linux-arm-kernel@lists.infradead.org, 
	linux-kernel@vger.kernel.org
Date: Wed, 18 Jun 2025 11:44:00 +0930
In-Reply-To: <20250615035803.3752235-2-cool_lee@aspeedtech.com>
References: <20250615035803.3752235-1-cool_lee@aspeedtech.com>
	 <20250615035803.3752235-2-cool_lee@aspeedtech.com>
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: base64
User-Agent: Evolution 3.46.4-2 
Precedence: bulk
X-Mailing-List: linux-mmc@vger.kernel.org
List-Id: <linux-mmc.vger.kernel.org>
List-Subscribe: <mailto:linux-mmc+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-mmc+unsubscribe@vger.kernel.org>
MIME-Version: 1.0

SGksCgpPbiBTdW4sIDIwMjUtMDYtMTUgYXQgMTE6NTcgKzA4MDAsIENvb2wgTGVlIHdyb3RlOgo+
IFJlcGxhY2Ugc2RoY2kgc29mdHdhcmUgcmVzZXQgYnkgc2N1IHJlc2V0IGZyb20gdG9wLgo+IAo+
IFNpZ25lZC1vZmYtYnk6IENvb2wgTGVlIDxjb29sX2xlZUBhc3BlZWR0ZWNoLmNvbT4KCkNhbiB5
b3UgcGxlYXNlIGFkZCBhIEZpeGVzOiB0YWc/Cgo+IC0tLQo+IMKgZHJpdmVycy9tbWMvaG9zdC9z
ZGhjaS1vZi1hc3BlZWQuYyB8IDU1ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrLQo+IMKg
MSBmaWxlIGNoYW5nZWQsIDU0IGluc2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkKPiAKPiBkaWZm
IC0tZ2l0IGEvZHJpdmVycy9tbWMvaG9zdC9zZGhjaS1vZi1hc3BlZWQuYyBiL2RyaXZlcnMvbW1j
L2hvc3Qvc2RoY2ktb2YtYXNwZWVkLmMKPiBpbmRleCBkNmRlMDEwNTUxYjkuLjAxYmM1NzQyNzJl
YiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL21tYy9ob3N0L3NkaGNpLW9mLWFzcGVlZC5jCj4gKysr
IGIvZHJpdmVycy9tbWMvaG9zdC9zZGhjaS1vZi1hc3BlZWQuYwo+IEBAIC0xMyw2ICsxMyw3IEBA
Cj4gwqAjaW5jbHVkZSA8bGludXgvb2YuaD4KPiDCoCNpbmNsdWRlIDxsaW51eC9vZl9wbGF0Zm9y
bS5oPgo+IMKgI2luY2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RldmljZS5oPgo+ICsjaW5jbHVkZSA8
bGludXgvcmVzZXQuaD4KPiDCoCNpbmNsdWRlIDxsaW51eC9zcGlubG9jay5oPgo+IMKgCj4gwqAj
aW5jbHVkZSAic2RoY2ktcGx0Zm0uaCIKPiBAQCAtMzksNiArNDAsNyBAQAo+IMKgc3RydWN0IGFz
cGVlZF9zZGMgewo+IMKgwqDCoMKgwqDCoMKgwqBzdHJ1Y3QgY2xrICpjbGs7Cj4gwqDCoMKgwqDC
oMKgwqDCoHN0cnVjdCByZXNvdXJjZSAqcmVzOwo+ICvCoMKgwqDCoMKgwqDCoHN0cnVjdCByZXNl
dF9jb250cm9sICpyc3Q7Cj4gwqAKPiDCoMKgwqDCoMKgwqDCoMKgc3BpbmxvY2tfdCBsb2NrOwo+
IMKgwqDCoMKgwqDCoMKgwqB2b2lkIF9faW9tZW0gKnJlZ3M7Cj4gQEAgLTMyOCwxMyArMzMwLDU4
IEBAIHN0YXRpYyB1MzIgYXNwZWVkX3NkaGNpX3JlYWRsKHN0cnVjdCBzZGhjaV9ob3N0ICpob3N0
LCBpbnQgcmVnKQo+IMKgwqDCoMKgwqDCoMKgwqByZXR1cm4gdmFsOwo+IMKgfQo+IMKgCj4gK3N0
YXRpYyB2b2lkIGFzcGVlZF9zZGhjaV9yZXNldChzdHJ1Y3Qgc2RoY2lfaG9zdCAqaG9zdCwgdTgg
bWFzaykKPiArewo+ICvCoMKgwqDCoMKgwqDCoHN0cnVjdCBzZGhjaV9wbHRmbV9ob3N0ICpwbHRm
bV9wcml2Owo+ICvCoMKgwqDCoMKgwqDCoHN0cnVjdCBhc3BlZWRfc2RoY2kgKmFzcGVlZF9zZGhj
aTsKPiArwqDCoMKgwqDCoMKgwqBzdHJ1Y3QgYXNwZWVkX3NkYyAqYXNwZWVkX3NkYzsKPiArwqDC
oMKgwqDCoMKgwqB1MzIgc2F2ZV9hcnJheVs3XTsKPiArwqDCoMKgwqDCoMKgwqB1MzIgcmVnX2Fy
cmF5W10gPSB7U0RIQ0lfRE1BX0FERFJFU1MsCj4gK8KgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqBTREhDSV9CTE9DS19TSVpFLAo+ICvCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgU0RIQ0lfQVJHVU1FTlQsCj4gK8KgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBTREhDSV9IT1NUX0NPTlRST0ws
Cj4gK8KgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBTREhDSV9D
TE9DS19DT05UUk9MLAo+ICvCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgU0RIQ0lfSU5UX0VOQUJMRSwKPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoFNESENJX1NJR05BTF9FTkFCTEV9Owo+ICvCoMKgwqDCoMKgwqDCoGlu
dCBpOwo+ICvCoMKgwqDCoMKgwqDCoHUxNiB0cmFuX21vZGU7Cj4gK8KgwqDCoMKgwqDCoMKgdTMy
IG1tYzhfbW9kZTsKPiArCj4gK8KgwqDCoMKgwqDCoMKgcGx0Zm1fcHJpdiA9IHNkaGNpX3ByaXYo
aG9zdCk7Cj4gK8KgwqDCoMKgwqDCoMKgYXNwZWVkX3NkaGNpID0gc2RoY2lfcGx0Zm1fcHJpdihw
bHRmbV9wcml2KTsKPiArwqDCoMKgwqDCoMKgwqBhc3BlZWRfc2RjID0gYXNwZWVkX3NkaGNpLT5w
YXJlbnQ7Cj4gKwo+ICvCoMKgwqDCoMKgwqDCoGlmICghSVNfRVJSKGFzcGVlZF9zZGMtPnJzdCkp
IHsKPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgZm9yIChpID0gMDsgaSA8IEFSUkFZ
X1NJWkUocmVnX2FycmF5KTsgaSsrKQo+ICvCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgc2F2ZV9hcnJheVtpXSA9IHNkaGNpX3JlYWRsKGhvc3QsIHJlZ19hcnJh
eVtpXSk7Cj4gKwo+ICvCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqB0cmFuX21vZGUgPSBz
ZGhjaV9yZWFkdyhob3N0LCBTREhDSV9UUkFOU0ZFUl9NT0RFKTsKPiArwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgbW1jOF9tb2RlID0gcmVhZGwoYXNwZWVkX3NkYy0+cmVncyk7Cj4gKwo+
ICvCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqByZXNldF9jb250cm9sX2Fzc2VydChhc3Bl
ZWRfc2RjLT5yc3QpOwo+ICvCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBtZGVsYXkoMSk7
Cj4gK8KgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoHJlc2V0X2NvbnRyb2xfZGVhc3NlcnQo
YXNwZWVkX3NkYy0+cnN0KTsKPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgbWRlbGF5
KDEpOwoKU2VlIGNvbW1lbnQgYmVsb3cgcmVnYXJkaW5nIGNsb2NrL3Jlc2V0IGJlaGF2aW91ciBh
bmQgaW1wbGVtZW50YXRpb24uCgo+ICsKPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
Zm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUocmVnX2FycmF5KTsgaSsrKQo+ICvCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgc2RoY2lfd3JpdGVsKGhvc3QsIHNh
dmVfYXJyYXlbaV0sIHJlZ19hcnJheVtpXSk7Cj4gKwo+ICvCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqBzZGhjaV93cml0ZXcoaG9zdCwgdHJhbl9tb2RlLCBTREhDSV9UUkFOU0ZFUl9NT0RF
KTsKPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgd3JpdGVsKG1tYzhfbW9kZSwgYXNw
ZWVkX3NkYy0+cmVncyk7Cj4gKwo+ICvCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBhc3Bl
ZWRfc2RoY2lfc2V0X2Nsb2NrKGhvc3QsIGhvc3QtPmNsb2NrKTsKPiArwqDCoMKgwqDCoMKgwqB9
Cj4gKwo+ICvCoMKgwqDCoMKgwqDCoHNkaGNpX3Jlc2V0KGhvc3QsIG1hc2spOwoKR2l2ZW4gdGhh
dCB3ZSBkbyB0aGlzIGFmdGVyIHRoZSBTQ1UgcmVzZXQgYWJvdmUsIHdoYXQgZXhhY3RseSBpcyB0
aGUKU0NVIHJlc2V0IGZpeGluZz8gQ2FuIHlvdSBwcm92aWRlIG1vcmUgZGV0YWlscz8KCj4gK30K
PiArCj4gwqBzdGF0aWMgY29uc3Qgc3RydWN0IHNkaGNpX29wcyBhc3BlZWRfc2RoY2lfb3BzID0g
ewo+IMKgwqDCoMKgwqDCoMKgwqAucmVhZF9sID0gYXNwZWVkX3NkaGNpX3JlYWRsLAo+IMKgwqDC
oMKgwqDCoMKgwqAuc2V0X2Nsb2NrID0gYXNwZWVkX3NkaGNpX3NldF9jbG9jaywKPiDCoMKgwqDC
oMKgwqDCoMKgLmdldF9tYXhfY2xvY2sgPSBhc3BlZWRfc2RoY2lfZ2V0X21heF9jbG9jaywKPiDC
oMKgwqDCoMKgwqDCoMKgLnNldF9idXNfd2lkdGggPSBhc3BlZWRfc2RoY2lfc2V0X2J1c193aWR0
aCwKPiDCoMKgwqDCoMKgwqDCoMKgLmdldF90aW1lb3V0X2Nsb2NrID0gc2RoY2lfcGx0Zm1fY2xr
X2dldF9tYXhfY2xvY2ssCj4gLcKgwqDCoMKgwqDCoMKgLnJlc2V0ID0gc2RoY2lfcmVzZXQsCj4g
K8KgwqDCoMKgwqDCoMKgLnJlc2V0ID0gYXNwZWVkX3NkaGNpX3Jlc2V0LAo+IMKgwqDCoMKgwqDC
oMKgwqAuc2V0X3Voc19zaWduYWxpbmcgPSBzZGhjaV9zZXRfdWhzX3NpZ25hbGluZywKPiDCoH07
Cj4gwqAKPiBAQCAtNTM1LDYgKzU4MiwxMiBAQCBzdGF0aWMgaW50IGFzcGVlZF9zZGNfcHJvYmUo
c3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKPiDCoAo+IMKgwqDCoMKgwqDCoMKgwqBzcGlu
X2xvY2tfaW5pdCgmc2RjLT5sb2NrKTsKPiDCoAo+ICvCoMKgwqDCoMKgwqDCoHNkYy0+cnN0ID0g
ZGV2bV9yZXNldF9jb250cm9sX2dldCgmcGRldi0+ZGV2LCBOVUxMKTsKPiArwqDCoMKgwqDCoMKg
wqBpZiAoIUlTX0VSUihzZGMtPnJzdCkpIHsKPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgcmVzZXRfY29udHJvbF9hc3NlcnQoc2RjLT5yc3QpOwo+ICvCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqByZXNldF9jb250cm9sX2RlYXNzZXJ0KHNkYy0+cnN0KTsKPiArwqDCoMKgwqDC
oMKgwqB9Cj4gKwoKVGhlIGNsb2NrIGRyaXZlciBmb3IgdGhlIEFTVDI0MDAsIEFTVDI1MDAgYW5k
IEFTVDI2MDAgbWFuYWdlcyB0aGUgcmVzZXQKYXMgcGFydCBvZiBtYW5hZ2luZyB0aGUgY2xvY2tb
MV1bMl0uCgpbMV06IGh0dHBzOi8vZ2l0Lmtlcm5lbC5vcmcvcHViL3NjbS9saW51eC9rZXJuZWwv
Z2l0L3RvcnZhbGRzL2xpbnV4LmdpdC90cmVlL2RyaXZlcnMvY2xrL2Nsay1hc3BlZWQuYz9oPXY2
LjE2LXJjMiNuNzEKWzJdOiBodHRwczovL2dpdC5rZXJuZWwub3JnL3B1Yi9zY20vbGludXgva2Vy
bmVsL2dpdC90b3J2YWxkcy9saW51eC5naXQvdHJlZS9kcml2ZXJzL2Nsay9jbGstYXNwZWVkLmM/
aD12Ni4xNi1yYzIjbjIwOQoKV2hhdCB5b3UgaGF2ZSBoZXJlIGFza3MgZm9yIGEgcmVzZXRzIHBy
b3BlcnR5LCBidXQgdGhhdCdzIG5vdCBjdXJyZW50bHkKc3BlY2lmaWVkIGluIHRoZSBkZXZpY2V0
cmVlIGJpbmRpbmcuCgpTbzogaXMgdGhlIGNsb2NrIGRyaXZlciBub3QgZG9pbmcgdGhlIHJpZ2h0
IHRoaW5nIGdpdmVuIHdlIGVuYWJsZSB0aGUKY2xvY2sgZGlyZWN0bHkgYmVsb3cgdGhpcyBodW5r
PyBJZiBub3QsIHNob3VsZCB3ZSBmaXggdGhhdCBpbnN0ZWFkPwoKV2UgY2FuIGFkZCB0aGUgcmVz
ZXRzIHByb3BlcnR5IHRvIHRoZSBiaW5kaW5nLCBidXQgSSdkIGFsc28gbGlrZSBhCmJldHRlciBl
eHBsYW5hdGlvbiBvZiB0aGUgcHJvYmxlbS4KCkFuZHJldwo=


